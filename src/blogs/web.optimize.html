
    <div style="padding:0 10px;"><p style="line-height:" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';="">&nbsp;&nbsp;&nbsp;&nbsp;一年一度的双11又到了, 这年头如果双11和自己公司没点什么关系的话, 都不好意思叫自己互联网公司...<span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';="" line-height:="" 32px;="">&nbsp; 先说个数据吧, 我们公司双11的时候流量大概是平时的三倍, 平时服务器的CPU一直稳定在25%左右. 所及针对特别节日(光棍节 o(╯□╰)o)做点优化很有必要.</span></span><br></p>
        <p style="line-height:" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';="">&nbsp;&nbsp;&nbsp;&nbsp;本文不谈代码级别的优化, 因为那个是内功, 需要时间的积累以及平时写代码的规范与合理, 咱们就谈谈突击优化怎么做. 还有咱们只谈前端优化, 因为后台优化的功力俺还不行....<img src="http://img.baidu.com/hi/jx2/j_0075.gif" style="float:" right;=""></span></p>
        <p style="line-height:" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';="">&nbsp;&nbsp;<img src="http://nigeerhuo-public.oss-cn-shanghai.aliyuncs.com/images/ueditor/php/upload/image/20151108/1446949762364650.png" title="1446949762364650.png" alt="blob.png"></span></p>
        <p style="line-height:" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';=""></span></p>
        <p style="line-height:" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';=""></span><br></p></div>

    <a href="javascript:;" class="show-detail">
        <span class="d-info">Show Detail</span>
        <span class="icon glyphicon glyphicon-play-circle"></span>
    </a>
		<span class="content" style="display:none;">
			<p style="white-space:" normal;="" line-height:="" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';="">先把牛掰的工具拿出来分享一波, 这些工具也是百度等前端团队推荐的前端优化工具.</span></p>
    <p style="white-space:" normal;="" line-height:="" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';="">1.&nbsp;<a href="https://developers.google.com/speed/pagespeed/insights/" target="_blank">Google PageSpeed</a></span><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';="">&nbsp;--- 应该要翻墙, 不过这年头连墙都不会翻, 可以回家种田了.</span></p>
    <p style="white-space:" normal;="" line-height:="" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';="">2.&nbsp;<a href="http://yslow.org/" target="_blank">YSlow</a>&nbsp; ---&nbsp;雅虎公司推出的前端优化工具, 浏览器插件(多平台支持)</span></p>
    <p style="white-space:" normal;="" line-height:="" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';="">&nbsp;&nbsp;&nbsp;&nbsp;好吧, 工具不说太多, 这俩个工具都很优秀, 我最喜欢Pagespeed, 因为Google的产品一向以UI打动我... &nbsp;俩者缺点也有,就是都不能提供代码级别的优化方案, (就是不能告诉你这地方这地方应该用快速排序算法而不是冒泡排序.) 但同时也不要迷信他们的解决方案, 因为有些是没法实施的.</span></p>
    <p style="white-space:" normal;="" line-height:="" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';=""></span></p>
    <hr style="white-space:" normal;="">
    <p style="white-space:" normal;="" line-height:="" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';="">我们所做的优化如下 :</span><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';=""></span><br></p>
    <p style="white-space:" normal;="" line-height:="" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';="">1.&nbsp;&nbsp;&nbsp;&nbsp;减小首页图片大小, 这个PageSpeed都有帮我们做(如下图), 根据它的算法, 我们首页的图片可以减少340K, 我们只选了其中几张优化明显的图片, 不然工作量有点大. (优化后的资源, 在页面底部有个下载链接哦) &nbsp;</span></p>
    <p style="white-space:" normal;="" line-height:="" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';="">注意 : Google 的图片优化方案是有危险的, 比如首页一张200x200px的图片以100x100px的大小展示, 那么它就会优化到100x100px的图片, 但如果页面其他地方用到这张图片就会出现明显的失真!&nbsp;</span></p>
    <p style="white-space:" normal;="" line-height:="" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';=""></span></p>
    <p style="white-space:" normal;="" line-height:="" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';=""><img src="http://www.meajax.com/ueditor/php/upload/image/20151108/1446948203906605.png" title="1446948203906605.png" alt="blob.png"></span></p>
    <p style="white-space:" normal;="" line-height:="" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';=""><img src="http://www.meajax.com/ueditor/php/upload/image/20151108/1446947908654788.png" title="1446947908654788.png" alt="blob.png" width="524" height="246" style="width:" 524px;="" height:="" 246px;=""></span></p>
    <p style="white-space:" normal;="" line-height:="" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';="">2.&nbsp;&nbsp;&nbsp;&nbsp;Css, Js资源文件用法同上. 但这里有个有趣的梗. 就是某些服务器提供商会自动对css,js资源Gzip压缩后传输给浏览器. 看下图 (Chrome Network面板截图):</span></p>
    <p style="white-space:" normal;="" line-height:="" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';="" color:="" rgb(255,="" 0,="" 0);="" background-color:="" 255,="" 255);="">红色</span><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';="">表示实际网络传输文件大小,&nbsp;<span style="color:" rgb(0,="" 176,="" 240);="">蓝色</span>表示实际文件大小&nbsp;</span></p>
    <p style="white-space:" normal;="" line-height:="" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';=""></span></p>
    <p style="white-space:" normal;="" line-height:="" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';=""></span></p>
    <p style="white-space:" normal;="" line-height:="" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';=""></span></p>
    <p style="white-space:" normal;="" line-height:="" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';="">我们使用的阿里云的服务器, 可以看到css, js以及文档都在传到浏览器前被压缩了, 而这个是阿里云自动完成的.但是图片不行. 所以, 我们对Css, JS文件压缩混淆也许并无多大效果.</span></p>
    <p style="white-space:" normal;="" line-height:="" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';=""><img src="http://www.meajax.com/ueditor/php/upload/image/20151108/1446948672409033.png" title="1446948672409033.png" alt="blob.png"></span></p>
    <p style="white-space:" normal;="" line-height:="" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';="">3.&nbsp;&nbsp;&nbsp;&nbsp;某些非重要内容模块化并且异步加载, 比如许多中小网站都加了双11的CPS广告, 这个完全可以模块化到一个Js文件中, 然后异步加载. 详情见我的另一篇文章seajs模块化. 这里模块化, 你肯定会需要用到一个工具,&nbsp;<a href="http://www.css88.com/tool/html2js/" target="_blank">html 转 Js.</a></span><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';="">它形如这样 :&nbsp;</span></p>
<pre class="brush:js;toolbar:false">[&lt;div&gt;,
&nbsp;&nbsp;&nbsp;&nbsp;Hello&nbsp;World,
&lt;/div&gt;].join();</pre>
    <p style="white-space:" normal;="" line-height:="" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';="">4.&nbsp;&nbsp;&nbsp;&nbsp;还有一些实践诸如 css放在文档头部, 并且用外部文件引入. 可以快速显示页面, 并缓存css.&nbsp;<br>但是Js文件放在底部的方法可行度并不是很高. 因为我们的页面很多地方都有嵌入Js片段的情况,而这些片段很可能用到某些函数库, 那么该怎么办呢 ?<br>我的建议是 :<br>&nbsp;除了jquery.js函数库放在头部外, 其它函数库都放在文档底部. 然后js代码片段都包在如下图</span></p>
<pre class="brush:js;toolbar:false">$(function&nbsp;()&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;文档加载完成,&nbsp;底部的函数库也加载完成了
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;代码片段放在这里
});</pre>
    <p style="white-space:" normal;="" line-height:="" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';="">其实这种方法可行度也不高, 因为许多现有代码片段都木有包裹在这种结构中, 我不可能一个一个去改吧. 所以, 表急还有一个方案..</span></p>
    <p style="white-space:" normal;="" line-height:="" 2em;=""><span style="font-family:" 微软雅黑,="" 'microsoft="" yahei';="">5.&nbsp;&nbsp;&nbsp;&nbsp;所有前端资源放在CDN上面, 管它什么头部底部,快到没盆友.这就是人民币玩家与我等钓丝玩家的差距...<img src="http://img.baidu.com/hi/jx2/j_0033.gif" style="float:" right;="">&nbsp;...</span></p>
    <p><br></p>
    </span>

